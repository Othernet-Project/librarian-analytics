// Generated by CoffeeScript 1.10.0
(function(window, $) {
  var LOCALE, TRACK_PATH, TZ_OFFSET, decode, getTrackingUrl, recordEvent;
  TRACK_PATH = 'analytics';
  LOCALE = (window.location.pathname.split('/'))[1];
  TZ_OFFSET = -(new Date()).getTimezoneOffset() / 60.0;
  getTrackingUrl = function() {
    return "/" + LOCALE + "/" + TRACK_PATH + "/";
  };
  decode = function(data) {
    while (decodeURIComponent(data) !== data) {
      data = decodeURIComponent(data);
    }
    return data;
  };
  recordEvent = function(e, data) {
    var ref;
    data.path = decode(data.path);
    data.tz = TZ_OFFSET;
    $.ajax({
      url: getTrackingUrl(),
      type: 'POST',
      data: data,
      async: (ref = data.type) === 'folder'
    });
  };
  ($(window)).on('analytics-collect', recordEvent);
})(this, this.jQuery);
